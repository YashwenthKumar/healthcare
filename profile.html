<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthTrack Pro - My Profile</title>
    <link rel="stylesheet" href="assets/css/profile.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h1>HealthTrack</h1>
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="Patient-dashboard.html">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="records.html">
                            <i class="fas fa-file-medical"></i>
                            <span>Medical Records</span>
                        </a>
                    </li>
                    <li>
                        <a href="consultation.html">
                            <i class="fas fa-user-md"></i>
                            <span>Doctor Consultations</span>
                        </a>
                    </li>
                    <li>
                        <a href="medication.html">
                            <i class="fas fa-pills"></i>
                            <span>Medications</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="profile.html">
                            <i class="fas fa-user-circle"></i>
                            <span>My Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="health-goals.html">
                            <i class="fas fa-bullseye"></i>
                            <span>Health Goals</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <a href="logout.html" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <h2>My Profile</h2>
                </div>
                <div class="header-right">
                    <div class="user-profile">
                        <img src="https://via.placeholder.com/40" alt="User Profile">
                        <span>Welcome, <span id="user-name">John Doe</span></span>
                    </div>
                </div>
            </header>

            <div class="profile-container">
                <div class="profile-header">
                    <h1>Personal Information</h1>
                    <button class="btn btn-primary" id="edit-profile-btn">Edit Profile</button>
                </div>

                <div class="profile-content">
                    <div class="profile-sidebar">
                        <div class="profile-card">
                            <div class="profile-picture">
                                <img src="https://via.placeholder.com/150" alt="Profile Picture" id="profile-image">
                                <div class="upload-btn">
                                    <button class="btn btn-outline">
                                        <i class="fas fa-camera"></i> Change Photo
                                    </button>
                                    <input type="file" id="profile-upload" accept="image/*">
                                </div>
                            </div>
                        </div>

                        <div class="profile-card quick-links">
                            <h3>Quick Links</h3>
                            <ul>
                                <li><a href="#personal-info" class="active"><i class="fas fa-user"></i> Personal Information</a></li>
                                <li><a href="#medical-info"><i class="fas fa-heartbeat"></i> Medical Information</a></li>
                                <li><a href="#emergency-contacts"><i class="fas fa-phone-alt"></i> Emergency Contacts</a></li>
                                <li><a href="#medical-history"><i class="fas fa-history"></i> Medical History</a></li>
                                <li><a href="#account-settings"><i class="fas fa-cog"></i> Account Settings</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="profile-main">
                        <!-- Personal Information Section -->
                        <section class="profile-section" id="personal-info">
                            <div class="section-header">
                                <h2>Personal Details</h2>
                                <button class="edit-btn" onclick="toggleEdit('personal-details')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>

                            <div class="profile-details" id="personal-details-view">
                                <div class="detail-item">
                                    <label>Full Name</label>
                                    <div class="value" id="full-name-value">John Michael Doe</div>
                                </div>
                                <div class="detail-item">
                                    <label>Date of Birth</label>
                                    <div class="value" id="dob-value">January 15, 1985</div>
                                </div>
                                <div class="detail-item">
                                    <label>Gender</label>
                                    <div class="value" id="gender-value">Male</div>
                                </div>
                                <div class="detail-item">
                                    <label>Email</label>
                                    <div class="value" id="email-value">john.doe@example.com</div>
                                </div>
                                <div class="detail-item">
                                    <label>Phone Number</label>
                                    <div class="value" id="phone-value">(555) 123-4567</div>
                                </div>
                                <div class="detail-item">
                                    <label>Address</label>
                                    <div class="value" id="address-value">123 Main Street, Apt 4B, New York, NY 10001</div>
                                </div>
                            </div>

                            <form class="edit-form" id="personal-details-edit">
                                <div class="profile-details">
                                    <div class="form-group">
                                        <label for="full-name">Full Name</label>
                                        <input type="text" id="full-name" value="John Michael Doe">
                                    </div>
                                    <div class="form-group">
                                        <label for="dob">Date of Birth</label>
                                        <input type="date" id="dob" value="1985-01-15">
                                    </div>
                                    <div class="form-group">
                                        <label for="gender">Gender</label>
                                        <select id="gender">
                                            <option value="male" selected>Male</option>
                                            <option value="female">Female</option>
                                            <option value="other">Other</option>
                                            <option value="prefer-not-to-say">Prefer not to say</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email</label>
                                        <input type="email" id="email" value="john.doe@example.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="phone">Phone Number</label>
                                        <input type="tel" id="phone" value="5551234567">
                                    </div>
                                    <div class="form-group">
                                        <label for="address">Address</label>
                                        <textarea id="address">123 Main Street, Apt 4B, New York, NY 10001</textarea>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" onclick="toggleEdit('personal-details')">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </section>

                        <!-- Medical Information Section -->
                        <section class="profile-section" id="medical-info">
                            <div class="section-header">
                                <h2>Medical Information</h2>
                                <button class="edit-btn" onclick="toggleEdit('medical-info')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>

                            <div class="profile-details" id="medical-info-view">
                                <div class="detail-item">
                                    <label>Blood Type</label>
                                    <div class="value" id="blood-type-value">A+</div>
                                </div>
                                <div class="detail-item">
                                    <label>Height</label>
                                    <div class="value" id="height-value">175 cm (5'9")</div>
                                </div>
                                <div class="detail-item">
                                    <label>Weight</label>
                                    <div class="value" id="weight-value">72 kg (158 lbs)</div>
                                </div>
                                <div class="detail-item">
                                    <label>Allergies</label>
                                    <div class="value" id="allergies-value">Penicillin, Peanuts</div>
                                </div>
                                <div class="detail-item">
                                    <label>Chronic Conditions</label>
                                    <div class="value" id="conditions-value">Asthma (mild)</div>
                                </div>
                                <div class="detail-item">
                                    <label>Current Medications</label>
                                    <div class="value" id="medications-value">Albuterol inhaler (as needed)</div>
                                </div>
                            </div>

                            <form class="edit-form" id="medical-info-edit">
                                <div class="profile-details">
                                    <div class="form-group">
                                        <label for="blood-type">Blood Type</label>
                                        <select id="blood-type">
                                            <option value="A+" selected>A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                            <option value="unknown">Unknown</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="height">Height (cm)</label>
                                        <input type="number" id="height" value="175">
                                    </div>
                                    <div class="form-group">
                                        <label for="weight">Weight (kg)</label>
                                        <input type="number" id="weight" value="72">
                                    </div>
                                    <div class="form-group">
                                        <label for="allergies">Allergies</label>
                                        <textarea id="allergies">Penicillin, Peanuts</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="conditions">Chronic Conditions</label>
                                        <textarea id="conditions">Asthma (mild)</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="medications">Current Medications</label>
                                        <textarea id="medications">Albuterol inhaler (as needed)</textarea>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" onclick="toggleEdit('medical-info')">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </section>

                        <!-- Emergency Contacts Section -->
                        <section class="profile-section" id="emergency-contacts">
                            <div class="section-header">
                                <h2>Emergency Contacts</h2>
                                <button class="btn btn-outline" onclick="openAddContactModal()">
                                    <i class="fas fa-plus"></i> Add Contact
                                </button>
                            </div>

                            <div class="emergency-contacts">
                                <div class="contact-card">
                                    <h3>Sarah Johnson</h3>
                                    <p><i class="fas fa-phone"></i> (555) 987-6543</p>
                                    <p><i class="fas fa-envelope"></i> sarah.j@example.com</p>
                                    <p><i class="fas fa-user"></i> Spouse</p>
                                </div>
                                <div class="contact-card">
                                    <h3>Michael Doe</h3>
                                    <p><i class="fas fa-phone"></i> (555) 456-7890</p>
                                    <p><i class="fas fa-envelope"></i> michael.d@example.com</p>
                                    <p><i class="fas fa-user"></i> Brother</p>
                                </div>
                                <div class="add-contact-btn" onclick="openAddContactModal()">
                                    <i class="fas fa-plus-circle" style="font-size: 24px;"></i>
                                    <span>Add Emergency Contact</span>
                                </div>
                            </div>
                        </section>

                        <!-- Medical History Section -->
                        <section class="profile-section" id="medical-history">
                            <div class="section-header">
                                <h2>Medical History</h2>
                                <button class="btn btn-outline">
                                    <i class="fas fa-plus"></i> Add Record
                                </button>
                            </div>

                            <div class="medical-history-list">
                                <div class="medical-history-item">
                                    <h3>Annual Physical Examination</h3>
                                    <div class="date">June 15, 2023</div>
                                    <div class="description">
                                        Routine checkup. Blood pressure 120/80, cholesterol levels normal. 
                                        Doctor recommended maintaining current exercise regimen and diet.
                                    </div>
                                </div>
                                <div class="medical-history-item">
                                    <h3>Asthma Follow-up</h3>
                                    <div class="date">March 3, 2023</div>
                                    <div class="description">
                                        Reported occasional shortness of breath during exercise. 
                                        Doctor adjusted inhaler dosage and recommended pulmonary function test.
                                    </div>
                                </div>
                                <div class="medical-history-item">
                                    <h3>Flu Vaccination</h3>
                                    <div class="date">October 12, 2022</div>
                                    <div class="description">
                                        Received annual flu vaccine. No adverse reactions reported.
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Emergency Contact Modal -->
    <div class="modal" id="contact-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('contact-modal')">&times;</span>
            <h2>Add Emergency Contact</h2>
            <form id="contact-form">
                <div class="form-group">
                    <label for="contact-name">Full Name</label>
                    <input type="text" id="contact-name" required>
                </div>
                <div class="form-group">
                    <label for="contact-relationship">Relationship</label>
                    <input type="text" id="contact-relationship" required>
                </div>
                <div class="form-group">
                    <label for="contact-phone">Phone Number</label>
                    <input type="tel" id="contact-phone" required>
                </div>
                <div class="form-group">
                    <label for="contact-email">Email (Optional)</label>
                    <input type="email" id="contact-email">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('contact-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Contact</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="password-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('password-modal')">&times;</span>
            <h2>Change Password</h2>
            <form id="password-form">
                <div class="form-group">
                    <label for="current-password">Current Password</label>
                    <input type="password" id="current-password" required>
                </div>
                <div class="form-group">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm New Password</label>
                    <input type="password" id="confirm-password" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('password-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Password</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load user data from session/local storage
            const userData = JSON.parse(localStorage.getItem('userData')) || {
                fullName: "John Michael Doe",
                dob: "1985-01-15",
                gender: "male",
                email: "john.doe@example.com",
                phone: "5551234567",
                address: "123 Main Street, Apt 4B, New York, NY 10001",
                bloodType: "A+",
                height: 175,
                weight: 72,
                allergies: "Penicillin, Peanuts",
                conditions: "Asthma (mild)",
                medications: "Albuterol inhaler (as needed)",
                profileImage: "https://via.placeholder.com/150"
            };
            
            // Set initial values
            document.getElementById('profile-image').src = userData.profileImage;
            document.getElementById('user-name').textContent = userData.fullName.split(' ')[0];
            
            // Profile picture upload
            document.getElementById('profile-upload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        document.getElementById('profile-image').src = event.target.result;
                        // In a real app, you would upload this to your server
                        userData.profileImage = event.target.result;
                        localStorage.setItem('userData', JSON.stringify(userData));
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Toggle edit mode for sections
            window.toggleEdit = function(section) {
                const view = document.getElementById(`${section}-view`);
                const edit = document.getElementById(`${section}-edit`);
                
                if (view.style.display === 'none') {
                    view.style.display = 'grid';
                    edit.style.display = 'none';
                } else {
                    view.style.display = 'none';
                    edit.style.display = 'block';
                }
            };
            
            // Form submissions
            document.getElementById('personal-details-edit').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Update user data
                userData.fullName = document.getElementById('full-name').value;
                userData.dob = document.getElementById('dob').value;
                userData.gender = document.getElementById('gender').value;
                userData.email = document.getElementById('email').value;
                userData.phone = document.getElementById('phone').value;
                userData.address = document.getElementById('address').value;
                
                // Update view
                document.getElementById('full-name-value').textContent = userData.fullName;
                document.getElementById('dob-value').textContent = formatDate(userData.dob);
                document.getElementById('gender-value').textContent = 
                    userData.gender === 'male' ? 'Male' : 
                    userData.gender === 'female' ? 'Female' : 
                    userData.gender === 'other' ? 'Other' : 'Prefer not to say';
                document.getElementById('email-value').textContent = userData.email;
                document.getElementById('phone-value').textContent = formatPhone(userData.phone);
                document.getElementById('address-value').textContent = userData.address;
                document.getElementById('user-name').textContent = userData.fullName.split(' ')[0];
                
                // Save to local storage
                localStorage.setItem('userData', JSON.stringify(userData));
                
                // Switch back to view mode
                toggleEdit('personal-details');
            });
            
            document.getElementById('medical-info-edit').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Update user data
                userData.bloodType = document.getElementById('blood-type').value;
                userData.height = document.getElementById('height').value;
                userData.weight = document.getElementById('weight').value;
                userData.allergies = document.getElementById('allergies').value;
                userData.conditions = document.getElementById('conditions').value;
                userData.medications = document.getElementById('medications').value;
                
                // Update view
                document.getElementById('blood-type-value').textContent = userData.bloodType;
                document.getElementById('height-value').textContent = `${userData.height} cm (${cmToFeet(userData.height)})`;
                document.getElementById('weight-value').textContent = `${userData.weight} kg (${kgToLbs(userData.weight)} lbs)`;
                document.getElementById('allergies-value').textContent = userData.allergies || 'None';
                document.getElementById('conditions-value').textContent = userData.conditions || 'None';
                document.getElementById('medications-value').textContent = userData.medications || 'None';
                
                // Save to local storage
                localStorage.setItem('userData', JSON.stringify(userData));
                
                // Switch back to view mode
                toggleEdit('medical-info');
            });
            
            // Modal functions
            window.openAddContactModal = function() {
                document.getElementById('contact-modal').style.display = 'flex';
            };
            
            window.openPasswordModal = function() {
                document.getElementById('password-modal').style.display = 'flex';
            };
            
            window.closeModal = function(modalId) {
                document.getElementById(modalId).style.display = 'none';
            };
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            // Contact form submission
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('contact-name').value;
                const relationship = document.getElementById('contact-relationship').value;
                const phone = document.getElementById('contact-phone').value;
                const email = document.getElementById('contact-email').value;
                
                // In a real app, you would save this to your backend
                alert(`Emergency contact ${name} added successfully!`);
                
                // Close modal and reset form
                closeModal('contact-modal');
                this.reset();
            });
            
            // Password form submission
            document.getElementById('password-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const current = document.getElementById('current-password').value;
                const newPass = document.getElementById('new-password').value;
                const confirm = document.getElementById('confirm-password').value;
                
                if (newPass !== confirm) {
                    alert("New passwords don't match!");
                    return;
                }
                
                // In a real app, you would validate current password and update
                alert("Password changed successfully!");
                
                // Close modal and reset form
                closeModal('password-modal');
                this.reset();
            });
            
            // Helper functions
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            }
            
            function formatPhone(phone) {
                // Simple phone formatting - in a real app you'd use a library
                if (phone.length === 10) {
                    return `(${phone.substring(0, 3)}) ${phone.substring(3, 6)}-${phone.substring(6)}`;
                }
                return phone;
            }
            
            function cmToFeet(cm) {
                const feet = Math.floor(cm / 30.48);
                const inches = Math.round((cm % 30.48) / 2.54);
                return `${feet}'${inches}"`;
            }
            
            function kgToLbs(kg) {
                return Math.round(kg * 2.20462);
            }
            
            // Initialize the page
            document.getElementById('full-name-value').textContent = userData.fullName;
            document.getElementById('dob-value').textContent = formatDate(userData.dob);
            document.getElementById('gender-value').textContent = 
                userData.gender === 'male' ? 'Male' : 
                userData.gender === 'female' ? 'Female' : 
                userData.gender === 'other' ? 'Other' : 'Prefer not to say';
            document.getElementById('email-value').textContent = userData.email;
            document.getElementById('phone-value').textContent = formatPhone(userData.phone);
            document.getElementById('address-value').textContent = userData.address;
            
            document.getElementById('blood-type-value').textContent = userData.bloodType;
            document.getElementById('height-value').textContent = `${userData.height} cm (${cmToFeet(userData.height)})`;
            document.getElementById('weight-value').textContent = `${userData.weight} kg (${kgToLbs(userData.weight)} lbs)`;
            document.getElementById('allergies-value').textContent = userData.allergies || 'None';
            document.getElementById('conditions-value').textContent = userData.conditions || 'None';
            document.getElementById('medications-value').textContent = userData.medications || 'None';
        });
    </script>
</body>
</html>